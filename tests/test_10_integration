import unittest
import pandas as pd
import numpy as np

from LightenPlot import (
    LightenPlot, 
    DiagnosticPlotter, 
    SummaryGenerator, 
    ModelComparator, 
    QuickPlotter
)


# TEST 10: INTEGRATION (2 tests)

class TestIntegration(unittest.TestCase):
    """Test complete workflow integration"""
    
    def setUp(self):
        self.mtcars = load_mtcars()
    
    def test_full_workflow(self):
        """Test complete workflow with all features"""
        pe = PlotEase(self.mtcars, theme='minimal')
        
        try:
            # Feature 1
            pe.autoplot(target='mpg', max_plots=2)
            
            # Feature 2
            summary = pe.tabular_summary(style='full')
            self.assertIsInstance(summary, pd.DataFrame)
            
            # Feature 3
            models = {
                'Model A': {'Accuracy': 0.85},
                'Model B': {'Accuracy': 0.90}
            }
            pe.compare_models(models)
            
            # Feature 4
            pe.quick_plot('hp', 'mpg', kind='scatter')
            
            success = True
        except Exception as e:
            print(f"Error: {e}")
            success = False
        
        self.assertTrue(success)
    
    def test_mtcars_analysis(self):
        """Test mtcars-specific analysis"""
        pe = PlotEase(self.mtcars)
        summary = pe.tabular_summary(style='numeric')
        
        # Verify key columns exist
        for col in ['mpg', 'hp', 'wt']:
            self.assertIn(col, self.mtcars.columns)

if __name__ == '__main__':
    print("="*80)
    print("LIGHTENPLOT INTEGRATION TEST - mtcars Dataset")
    print("="*80)
    print("  âœ“ Integration (2 tests)")

    unittest.main(verbosity=2)